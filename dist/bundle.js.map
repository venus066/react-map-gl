{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bundle.js","webpack:///webpack/bootstrap 281abf4cc99d646a8a7c","webpack:///external \"immutable\"","webpack:///./src/index.js","webpack:///external \"prop-types\"","webpack:///external \"react\"","webpack:///./src/utils/diff-styles.js","webpack:///./src/utils/style-utils.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","writable","setPrototypeOf","__proto__","noop","_createClass","defineProperties","target","props","length","descriptor","key","protoProps","staticProps","_immutable","_immutable2","_propTypes","_propTypes2","_react","_diffStyles2","_diffStyles3","_styleUtils","_styleUtils2","propTypes","className","string","style","isRequired","accessToken","preserveDrawingBuffer","bool","attributionControl","mapStyle","oneOfType","instanceOf","Map","preventStyleDiffing","onViewportChange","func","longitude","number","latitude","zoom","bearing","pitch","onLoad","defaultProps","visible","MapGL","_PureComponent","_this","getPrototypeOf","_queryParams","mapboxgl","supported","componentDidMount","componentWillReceiveProps","componentDidUpdate","_onViewportChange","bind","isMap","toJS","map","container","center","interactive","canvas","getCanvas","outline","once","on","_map","_updateMapViewport","_updateQueryParams","newProps","_updateMapStyle","remove","geometry","parameters","queryParams","layers","queryRenderedFeatures","interactiveLayerIds","update","newSource","source","type","oldSource","getSource","id","oldOpts","workerOptions","undefined","maxzoom","geojsonVtOptions","maxZoom","buffer","tolerance","cluster","clusterRadius","superclusterOptions","radius","clusterMaxZoom","setData","data","removeSource","addSource","prevStyle","nextStyle","styleKeysMap","delete","_this2","prevKeysMap","nextKeysMap","prevKeysList","keys","nextKeysList","some","setStyle","_diffStyles","sourcesDiff","layersDiff","updates","node","layer","enter","forEach","_updateSource","exit","exiting","getLayer","removeLayer","addLayer","before","oldProps","oldMapStyle","_setDiffStyle","getCenter","lat","lng","getZoom","getPitch","getBearing","flyTo","event","_map$getCenter","viewport","_this3","_props","createElement","ref","_ref","PureComponent","displayName","diffSources","prevSources","nextSources","prevIds","keySeq","toArray","nextIds","nextSource","equals","push","diffLayers","prevLayers","nextLayers","prevMap","nextMap","index","layerImBehind","reverse","diffStyle","getInteractiveLayerIds","has","filter","Array","isArray"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"prop-types\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\", \"prop-types\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@urbica/react-map-gl\"] = factory(require(\"immutable\"), require(\"prop-types\"), require(\"react\"));\n\telse\n\t\troot[\"@urbica/react-map-gl\"] = factory(root[\"immutable\"], root[\"prop-types\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"immutable\"), require(\"prop-types\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"immutable\", \"prop-types\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@urbica/react-map-gl\"] = factory(require(\"immutable\"), require(\"prop-types\"), require(\"react\"));\n\telse\n\t\troot[\"@urbica/react-map-gl\"] = factory(root[\"immutable\"], root[\"prop-types\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _immutable = __webpack_require__(0);\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _propTypes = __webpack_require__(2);\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _react = __webpack_require__(3);\n\nvar _diffStyles2 = __webpack_require__(4);\n\nvar _diffStyles3 = _interopRequireDefault(_diffStyles2);\n\nvar _styleUtils = __webpack_require__(5);\n\nvar _styleUtils2 = _interopRequireDefault(_styleUtils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* global mapboxgl */\n\nfunction noop() {}\n\nvar propTypes = {\n  /** Map container className */\n  className: _propTypes2.default.string,\n  /** Map container style */\n  style: _propTypes2.default.object.isRequired,\n\n  /** Mapbox API access token for mapbox-gl-js. Required when using Mapbox vector tiles/styles. */\n  accessToken: _propTypes2.default.string,\n  /** Mapbox WebGL context creation option. Useful when you want to export the canvas as a PNG. */\n  preserveDrawingBuffer: _propTypes2.default.bool,\n  /** Show attribution control or not. */\n  attributionControl: _propTypes2.default.bool,\n\n  /** The Mapbox style. A string url or a MapboxGL style Immutable.Map object. */\n  mapStyle: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.instanceOf(_immutable2.default.Map)]),\n  /** There are known issues with style diffing. As stopgap, add option to prevent style diffing. */\n  preventStyleDiffing: _propTypes2.default.bool,\n  /**\n   * `onViewportChange` callback is fired when the user interacted with the\n   * map. The object passed to the callback contains viewport properties\n   * such as `longitude`, `latitude`, `zoom` etc.\n   */\n  onViewportChange: _propTypes2.default.func,\n\n  /** The longitude of the center of the map. */\n  longitude: _propTypes2.default.number.isRequired,\n  /** The latitude of the center of the map. */\n  latitude: _propTypes2.default.number.isRequired,\n  /** The tile zoom level of the map. */\n  zoom: _propTypes2.default.number.isRequired,\n  /** Specify the bearing of the viewport */\n  bearing: _propTypes2.default.number,\n  /** Specify the pitch of the viewport */\n  pitch: _propTypes2.default.number,\n  /** The onLoad callback for the map */\n  onLoad: _propTypes2.default.func\n};\n\nvar defaultProps = {\n  className: null,\n  mapStyle: 'mapbox://styles/mapbox/light-v8',\n  accessToken: null,\n  preserveDrawingBuffer: false,\n  onViewportChange: null,\n  attributionControl: true,\n  preventStyleDiffing: false,\n  visible: true,\n  bearing: 0,\n  pitch: 0,\n  onLoad: noop\n};\n\nvar MapGL = function (_PureComponent) {\n  _inherits(MapGL, _PureComponent);\n\n  _createClass(MapGL, null, [{\n    key: 'supported',\n    value: function supported() {\n      return mapboxgl && mapboxgl.supported();\n    }\n  }]);\n\n  function MapGL(props) {\n    _classCallCheck(this, MapGL);\n\n    var _this = _possibleConstructorReturn(this, (MapGL.__proto__ || Object.getPrototypeOf(MapGL)).call(this, props));\n\n    _this._queryParams = {};\n\n    if (mapboxgl) {\n      mapboxgl.accessToken = props.accessToken;\n    }\n\n    if (!MapGL.supported()) {\n      _this.componentDidMount = noop;\n      _this.componentWillReceiveProps = noop;\n      _this.componentDidUpdate = noop;\n    }\n\n    _this._onViewportChange = _this._onViewportChange.bind(_this);\n    return _this;\n  }\n\n  _createClass(MapGL, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (!mapboxgl) {\n        return;\n      }\n\n      var mapStyle = _immutable2.default.Map.isMap(this.props.mapStyle) ? this.props.mapStyle.toJS() : this.props.mapStyle;\n\n      var map = new mapboxgl.Map({\n        container: this.container,\n        style: mapStyle,\n        center: [this.props.longitude, this.props.latitude],\n        zoom: this.props.zoom,\n        pitch: this.props.pitch,\n        bearing: this.props.bearing,\n        interactive: !!this.props.onViewportChange,\n        attributionControl: this.props.attributionControl,\n        preserveDrawingBuffer: this.props.preserveDrawingBuffer\n      });\n\n      // Disable outline style\n      var canvas = map.getCanvas();\n      if (canvas) {\n        canvas.style.outline = 'none';\n      }\n\n      // Attach optional onLoad function\n      map.once('load', this.props.onLoad);\n\n      map.on('drag', this._onViewportChange);\n      map.on('zoom', this._onViewportChange);\n\n      this._map = map;\n      this._updateMapViewport({}, this.props);\n      this._updateQueryParams(mapStyle);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      if (!mapboxgl) {\n        return;\n      }\n      this._updateMapViewport(this.props, newProps);\n      this._updateMapStyle(this.props, newProps);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (!mapboxgl) {\n        return;\n      }\n\n      if (this._map) {\n        this._map.remove();\n      }\n    }\n\n    // External apps can access map this way\n\n  }, {\n    key: 'getMap',\n    value: function getMap() {\n      return this._map;\n    }\n\n    /** Uses Mapbox's\n      * queryRenderedFeatures API to find features at point or in a bounding box.\n      * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n      * To query only some of the layers, set the `interactive` property in the\n      * layer style to `true`.\n      * @param {[Number, Number]|[[Number, Number], [Number, Number]]} geometry -\n      *   Point or an array of two points defining the bounding box\n      * @param {Object} parameters - query options\n      */\n\n  }, {\n    key: 'queryRenderedFeatures',\n    value: function queryRenderedFeatures(geometry, parameters) {\n      var queryParams = parameters || this._queryParams;\n      if (queryParams.layers && queryParams.layers.length === 0) {\n        return [];\n      }\n      return this._map.queryRenderedFeatures(geometry, queryParams);\n    }\n\n    // Hover and click only query layers whose interactive property is true\n\n  }, {\n    key: '_updateQueryParams',\n    value: function _updateQueryParams(mapStyle) {\n      var interactiveLayerIds = (0, _styleUtils2.default)(mapStyle);\n      this._queryParams = { layers: interactiveLayerIds };\n    }\n\n    // Update a source in the map style\n\n  }, {\n    key: '_updateSource',\n    value: function _updateSource(update) {\n      var map = this._map;\n      var newSource = update.source.toJS();\n      if (newSource.type === 'geojson') {\n        var oldSource = map.getSource(update.id);\n        if (oldSource.type === 'geojson') {\n          // update data if no other GeoJSONSource options were changed\n          var oldOpts = oldSource.workerOptions;\n          if ((newSource.maxzoom === undefined || newSource.maxzoom === oldOpts.geojsonVtOptions.maxZoom) && (newSource.buffer === undefined || newSource.buffer === oldOpts.geojsonVtOptions.buffer) && (newSource.tolerance === undefined || newSource.tolerance === oldOpts.geojsonVtOptions.tolerance) && (newSource.cluster === undefined || newSource.cluster === oldOpts.cluster) && (newSource.clusterRadius === undefined || newSource.clusterRadius === oldOpts.superclusterOptions.radius) && (newSource.clusterMaxZoom === undefined || newSource.clusterMaxZoom === oldOpts.superclusterOptions.maxZoom)) {\n            oldSource.setData(newSource.data);\n            return;\n          }\n        }\n      }\n\n      map.removeSource(update.id);\n      map.addSource(update.id, newSource);\n    }\n\n    // Individually update the maps source and layers that have changed if all\n    // other style props haven't changed. This prevents flicking of the map when\n    // styles only change sources or layers.\n    /* eslint-disable max-statements, complexity */\n\n  }, {\n    key: '_setDiffStyle',\n    value: function _setDiffStyle(prevStyle, nextStyle) {\n      var _this2 = this;\n\n      function styleKeysMap(style) {\n        return style.map(function () {\n          return true;\n        }).delete('layers').delete('sources').toJS();\n      }\n\n      var prevKeysMap = prevStyle && (styleKeysMap(prevStyle) || {});\n      var nextKeysMap = styleKeysMap(nextStyle);\n      function propsOtherThanLayersOrSourcesDiffer() {\n        var prevKeysList = Object.keys(prevKeysMap);\n        var nextKeysList = Object.keys(nextKeysMap);\n        if (prevKeysList.length !== nextKeysList.length) {\n          return true;\n        }\n        // `nextStyle` and `prevStyle` should not have the same set of props.\n        if (nextKeysList.some(function (key) {\n          return prevStyle.get(key) !== nextStyle.get(key);\n        }\n        // But the value of one of those props is different.\n        )) {\n          return true;\n        }\n        return false;\n      }\n\n      var map = this._map;\n\n      if (!prevStyle || propsOtherThanLayersOrSourcesDiffer()) {\n        map.setStyle(nextStyle.toJS());\n        return;\n      }\n\n      var _diffStyles = (0, _diffStyles3.default)(prevStyle, nextStyle),\n          sourcesDiff = _diffStyles.sourcesDiff,\n          layersDiff = _diffStyles.layersDiff;\n\n      // TODO: It's rather difficult to determine style diffing in the presence\n      // of refs. For now, if any style update has a ref, fallback to no diffing.\n      // We can come back to this case if there's a solid usecase.\n\n\n      if (layersDiff.updates.some(function (node) {\n        return node.layer.get('ref');\n      })) {\n        map.setStyle(nextStyle.toJS());\n        return;\n      }\n\n      sourcesDiff.enter.forEach(function (enter) {\n        return map.addSource(enter.id, enter.source.toJS());\n      });\n\n      sourcesDiff.update.forEach(function (update) {\n        return _this2._updateSource(update);\n      });\n\n      sourcesDiff.exit.forEach(function (exit) {\n        return map.removeSource(exit.id);\n      });\n\n      layersDiff.exiting.forEach(function (exit) {\n        if (map.style.getLayer(exit.id)) {\n          map.removeLayer(exit.id);\n        }\n      });\n\n      layersDiff.updates.forEach(function (update) {\n        if (!update.enter) {\n          // This is an old layer that needs to be updated. Remove the old layer\n          // with the same id and add it back again.\n          map.removeLayer(update.id);\n        }\n        map.addLayer(update.layer.toJS(), update.before);\n      });\n    }\n  }, {\n    key: '_updateMapStyle',\n    value: function _updateMapStyle(oldProps, newProps) {\n      var mapStyle = newProps.mapStyle;\n      var oldMapStyle = oldProps.mapStyle;\n      if (mapStyle !== oldMapStyle) {\n        if (_immutable2.default.Map.isMap(mapStyle)) {\n          if (this.props.preventStyleDiffing) {\n            this._map.setStyle(mapStyle.toJS());\n          } else {\n            this._setDiffStyle(oldMapStyle, mapStyle);\n          }\n        } else {\n          this._map.setStyle(mapStyle);\n        }\n        this._updateQueryParams(mapStyle);\n      }\n    }\n  }, {\n    key: '_updateMapViewport',\n    value: function _updateMapViewport(oldProps, newProps) {\n      var map = this._map;\n      var center = map.getCenter();\n\n      var viewportChanged = newProps.latitude !== center.lat || newProps.longitude !== center.lng || newProps.zoom !== map.getZoom() || newProps.pitch !== map.getPitch() || newProps.bearing !== map.getBearing();\n\n      if (viewportChanged) {\n        map.flyTo({\n          center: [newProps.longitude, newProps.latitude],\n          zoom: newProps.zoom,\n          pitch: newProps.pitch,\n          bearing: newProps.bearing\n        });\n      }\n    }\n  }, {\n    key: '_onViewportChange',\n    value: function _onViewportChange(event) {\n      var map = event.target;\n\n      var _map$getCenter = map.getCenter(),\n          lng = _map$getCenter.lng,\n          lat = _map$getCenter.lat;\n\n      var zoom = map.getZoom();\n      var pitch = map.getPitch();\n      var bearing = map.getBearing();\n\n      var viewport = {\n        latitude: lat,\n        longitude: lng,\n        zoom: zoom,\n        pitch: pitch,\n        bearing: bearing\n      };\n\n      this.props.onViewportChange(viewport);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var _props = this.props,\n          className = _props.className,\n          style = _props.style;\n\n\n      return (0, _react.createElement)('div', {\n        ref: function ref(_ref) {\n          return _this3.container = _ref;\n        },\n        style: style,\n        className: className\n      });\n    }\n  }]);\n\n  return MapGL;\n}(_react.PureComponent);\n\nMapGL.displayName = 'MapGL';\nMapGL.propTypes = propTypes;\nMapGL.defaultProps = defaultProps;\n\nexports.default = MapGL;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.diffSources = diffSources;\nexports.diffLayers = diffLayers;\nexports.default = diffStyle;\n// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* eslint-disable max-statements */\nfunction diffSources(prevStyle, nextStyle) {\n  var prevSources = prevStyle.get('sources');\n  var nextSources = nextStyle.get('sources');\n  var enter = [];\n  var update = [];\n  var exit = [];\n  var prevIds = prevSources.keySeq().toArray();\n  var nextIds = nextSources.keySeq().toArray();\n  prevIds.forEach(function (id) {\n    var nextSource = nextSources.get(id);\n    if (nextSource) {\n      if (!nextSource.equals(prevSources.get(id))) {\n        update.push({ id: id, source: nextSources.get(id) });\n      }\n    } else {\n      exit.push({ id: id, source: prevSources.get(id) });\n    }\n  });\n  nextIds.forEach(function (id) {\n    var prevSource = prevSources.get(id);\n    if (!prevSource) {\n      enter.push({ id: id, source: nextSources.get(id) });\n    }\n  });\n  return { enter: enter, update: update, exit: exit };\n}\n/* eslint-enable max-statements */\n\nfunction diffLayers(prevStyle, nextStyle) {\n  var prevLayers = prevStyle.get('layers');\n  var nextLayers = nextStyle.get('layers');\n  var updates = [];\n  var exiting = [];\n  var prevMap = {};\n  var nextMap = {};\n  nextLayers.forEach(function (layer, index) {\n    var id = layer.get('id');\n    var layerImBehind = nextLayers.get(index + 1);\n    nextMap[id] = {\n      layer: layer,\n      id: id,\n      // The `id` of the layer before this one.\n      before: layerImBehind ? layerImBehind.get('id') : null,\n      enter: true\n    };\n  });\n  prevLayers.forEach(function (layer, index) {\n    var id = layer.get('id');\n    var layerImBehind = prevLayers.get(index + 1);\n    prevMap[id] = {\n      layer: layer,\n      id: id,\n      before: layerImBehind ? layerImBehind.get('id') : null\n    };\n    if (nextMap[id]) {\n      // Not a new layer.\n      nextMap[id].enter = false;\n    } else {\n      // This layer is being removed.\n      exiting.push(prevMap[id]);\n    }\n  });\n  nextLayers.reverse().forEach(function (layer) {\n    var id = layer.get('id');\n    if (!prevMap[id] || !prevMap[id].layer.equals(nextMap[id].layer) || prevMap[id].before !== nextMap[id].before) {\n      // This layer is being changed.\n      updates.push(nextMap[id]);\n    }\n  });\n  return { updates: updates, exiting: exiting };\n}\n\nfunction diffStyle(prevStyle, nextStyle) {\n  return {\n    sourcesDiff: diffSources(prevStyle, nextStyle),\n    layersDiff: diffLayers(prevStyle, nextStyle)\n  };\n}\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = __webpack_require__(0);\n\nfunction getInteractiveLayerIds(mapStyle) {\n  var interactiveLayerIds = [];\n\n  if (_immutable.Map.isMap(mapStyle) && mapStyle.has('layers')) {\n    interactiveLayerIds = mapStyle.get('layers').filter(function (l) {\n      return l.get('interactive');\n    }).map(function (l) {\n      return l.get('id');\n    }).toJS();\n  } else if (Array.isArray(mapStyle.layers)) {\n    interactiveLayerIds = mapStyle.layers.filter(function (l) {\n      return l.interactive;\n    }).map(function (l) {\n      return l.id;\n    });\n  }\n\n  return interactiveLayerIds;\n}\n\nexports.default = getInteractiveLayerIds;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 281abf4cc99d646a8a7c","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"immutable\"\n// module id = 0\n// module chunks = 0","/* global mapboxgl */\n\nimport Immutable from 'immutable';\nimport PropTypes from 'prop-types';\nimport { PureComponent, createElement } from 'react';\n\nimport diffStyles from './utils/diff-styles';\nimport getInteractiveLayerIds from './utils/style-utils';\n\nfunction noop() {}\n\nconst propTypes = {\n  /** Map container className */\n  className: PropTypes.string,\n  /** Map container style */\n  style: PropTypes.object.isRequired,\n\n  /** Mapbox API access token for mapbox-gl-js. Required when using Mapbox vector tiles/styles. */\n  accessToken: PropTypes.string,\n  /** Mapbox WebGL context creation option. Useful when you want to export the canvas as a PNG. */\n  preserveDrawingBuffer: PropTypes.bool,\n  /** Show attribution control or not. */\n  attributionControl: PropTypes.bool,\n\n  /** The Mapbox style. A string url or a MapboxGL style Immutable.Map object. */\n  mapStyle: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(Immutable.Map)\n  ]),\n  /** There are known issues with style diffing. As stopgap, add option to prevent style diffing. */\n  preventStyleDiffing: PropTypes.bool,\n  /**\n   * `onViewportChange` callback is fired when the user interacted with the\n   * map. The object passed to the callback contains viewport properties\n   * such as `longitude`, `latitude`, `zoom` etc.\n   */\n  onViewportChange: PropTypes.func,\n\n  /** The longitude of the center of the map. */\n  longitude: PropTypes.number.isRequired,\n  /** The latitude of the center of the map. */\n  latitude: PropTypes.number.isRequired,\n  /** The tile zoom level of the map. */\n  zoom: PropTypes.number.isRequired,\n  /** Specify the bearing of the viewport */\n  bearing: PropTypes.number,\n  /** Specify the pitch of the viewport */\n  pitch: PropTypes.number,\n  /** The onLoad callback for the map */\n  onLoad: PropTypes.func\n};\n\nconst defaultProps = {\n  className: null,\n  mapStyle: 'mapbox://styles/mapbox/light-v8',\n  accessToken: null,\n  preserveDrawingBuffer: false,\n  onViewportChange: null,\n  attributionControl: true,\n  preventStyleDiffing: false,\n  visible: true,\n  bearing: 0,\n  pitch: 0,\n  onLoad: noop\n};\n\nclass MapGL extends PureComponent {\n  static supported() {\n    return mapboxgl && mapboxgl.supported();\n  }\n\n  constructor(props) {\n    super(props);\n    this._queryParams = {};\n\n    if (mapboxgl) {\n      mapboxgl.accessToken = props.accessToken;\n    }\n\n    if (!MapGL.supported()) {\n      this.componentDidMount = noop;\n      this.componentWillReceiveProps = noop;\n      this.componentDidUpdate = noop;\n    }\n\n    this._onViewportChange = this._onViewportChange.bind(this);\n  }\n\n  componentDidMount() {\n    if (!mapboxgl) {\n      return;\n    }\n\n    const mapStyle = Immutable.Map.isMap(this.props.mapStyle)\n      ? this.props.mapStyle.toJS()\n      : this.props.mapStyle;\n\n    const map = new mapboxgl.Map({\n      container: this.container,\n      style: mapStyle,\n      center: [this.props.longitude, this.props.latitude],\n      zoom: this.props.zoom,\n      pitch: this.props.pitch,\n      bearing: this.props.bearing,\n      interactive: !!this.props.onViewportChange,\n      attributionControl: this.props.attributionControl,\n      preserveDrawingBuffer: this.props.preserveDrawingBuffer\n    });\n\n    // Disable outline style\n    const canvas = map.getCanvas();\n    if (canvas) {\n      canvas.style.outline = 'none';\n    }\n\n    // Attach optional onLoad function\n    map.once('load', this.props.onLoad);\n\n    map.on('drag', this._onViewportChange);\n    map.on('zoom', this._onViewportChange);\n\n    this._map = map;\n    this._updateMapViewport({}, this.props);\n    this._updateQueryParams(mapStyle);\n  }\n\n  componentWillReceiveProps(newProps) {\n    if (!mapboxgl) {\n      return;\n    }\n    this._updateMapViewport(this.props, newProps);\n    this._updateMapStyle(this.props, newProps);\n  }\n\n  componentWillUnmount() {\n    if (!mapboxgl) {\n      return;\n    }\n\n    if (this._map) {\n      this._map.remove();\n    }\n  }\n\n  // External apps can access map this way\n  getMap() {\n    return this._map;\n  }\n\n  /** Uses Mapbox's\n    * queryRenderedFeatures API to find features at point or in a bounding box.\n    * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n    * To query only some of the layers, set the `interactive` property in the\n    * layer style to `true`.\n    * @param {[Number, Number]|[[Number, Number], [Number, Number]]} geometry -\n    *   Point or an array of two points defining the bounding box\n    * @param {Object} parameters - query options\n    */\n  queryRenderedFeatures(geometry, parameters) {\n    const queryParams = parameters || this._queryParams;\n    if (queryParams.layers && queryParams.layers.length === 0) {\n      return [];\n    }\n    return this._map.queryRenderedFeatures(geometry, queryParams);\n  }\n\n  // Hover and click only query layers whose interactive property is true\n  _updateQueryParams(mapStyle) {\n    const interactiveLayerIds = getInteractiveLayerIds(mapStyle);\n    this._queryParams = { layers: interactiveLayerIds };\n  }\n\n  // Update a source in the map style\n  _updateSource(update) {\n    const map = this._map;\n    const newSource = update.source.toJS();\n    if (newSource.type === 'geojson') {\n      const oldSource = map.getSource(update.id);\n      if (oldSource.type === 'geojson') {\n        // update data if no other GeoJSONSource options were changed\n        const oldOpts = oldSource.workerOptions;\n        if (\n          (newSource.maxzoom === undefined ||\n            newSource.maxzoom === oldOpts.geojsonVtOptions.maxZoom) &&\n          (newSource.buffer === undefined ||\n            newSource.buffer === oldOpts.geojsonVtOptions.buffer) &&\n          (newSource.tolerance === undefined ||\n            newSource.tolerance === oldOpts.geojsonVtOptions.tolerance) &&\n          (newSource.cluster === undefined ||\n            newSource.cluster === oldOpts.cluster) &&\n          (newSource.clusterRadius === undefined ||\n            newSource.clusterRadius === oldOpts.superclusterOptions.radius) &&\n          (newSource.clusterMaxZoom === undefined ||\n            newSource.clusterMaxZoom === oldOpts.superclusterOptions.maxZoom)\n        ) {\n          oldSource.setData(newSource.data);\n          return;\n        }\n      }\n    }\n\n    map.removeSource(update.id);\n    map.addSource(update.id, newSource);\n  }\n\n  // Individually update the maps source and layers that have changed if all\n  // other style props haven't changed. This prevents flicking of the map when\n  // styles only change sources or layers.\n  /* eslint-disable max-statements, complexity */\n  _setDiffStyle(prevStyle, nextStyle) {\n    function styleKeysMap(style) {\n      return style.map(() => true).delete('layers').delete('sources').toJS();\n    }\n\n    const prevKeysMap = prevStyle && (styleKeysMap(prevStyle) || {});\n    const nextKeysMap = styleKeysMap(nextStyle);\n    function propsOtherThanLayersOrSourcesDiffer() {\n      const prevKeysList = Object.keys(prevKeysMap);\n      const nextKeysList = Object.keys(nextKeysMap);\n      if (prevKeysList.length !== nextKeysList.length) {\n        return true;\n      }\n      // `nextStyle` and `prevStyle` should not have the same set of props.\n      if (\n        nextKeysList.some(\n          key => prevStyle.get(key) !== nextStyle.get(key)\n          // But the value of one of those props is different.\n        )\n      ) {\n        return true;\n      }\n      return false;\n    }\n\n    const map = this._map;\n\n    if (!prevStyle || propsOtherThanLayersOrSourcesDiffer()) {\n      map.setStyle(nextStyle.toJS());\n      return;\n    }\n\n    const { sourcesDiff, layersDiff } = diffStyles(prevStyle, nextStyle);\n\n    // TODO: It's rather difficult to determine style diffing in the presence\n    // of refs. For now, if any style update has a ref, fallback to no diffing.\n    // We can come back to this case if there's a solid usecase.\n    if (layersDiff.updates.some(node => node.layer.get('ref'))) {\n      map.setStyle(nextStyle.toJS());\n      return;\n    }\n\n    sourcesDiff.enter.forEach(enter =>\n      map.addSource(enter.id, enter.source.toJS())\n    );\n\n    sourcesDiff.update.forEach(update => this._updateSource(update));\n\n    sourcesDiff.exit.forEach(exit => map.removeSource(exit.id));\n\n    layersDiff.exiting.forEach((exit) => {\n      if (map.style.getLayer(exit.id)) {\n        map.removeLayer(exit.id);\n      }\n    });\n\n    layersDiff.updates.forEach((update) => {\n      if (!update.enter) {\n        // This is an old layer that needs to be updated. Remove the old layer\n        // with the same id and add it back again.\n        map.removeLayer(update.id);\n      }\n      map.addLayer(update.layer.toJS(), update.before);\n    });\n  }\n\n  _updateMapStyle(oldProps, newProps) {\n    const mapStyle = newProps.mapStyle;\n    const oldMapStyle = oldProps.mapStyle;\n    if (mapStyle !== oldMapStyle) {\n      if (Immutable.Map.isMap(mapStyle)) {\n        if (this.props.preventStyleDiffing) {\n          this._map.setStyle(mapStyle.toJS());\n        } else {\n          this._setDiffStyle(oldMapStyle, mapStyle);\n        }\n      } else {\n        this._map.setStyle(mapStyle);\n      }\n      this._updateQueryParams(mapStyle);\n    }\n  }\n\n  _updateMapViewport(oldProps, newProps) {\n    const map = this._map;\n    const center = map.getCenter();\n\n    const viewportChanged =\n      newProps.latitude !== center.lat ||\n      newProps.longitude !== center.lng ||\n      newProps.zoom !== map.getZoom() ||\n      newProps.pitch !== map.getPitch() ||\n      newProps.bearing !== map.getBearing();\n\n    if (viewportChanged) {\n      map.flyTo({\n        center: [newProps.longitude, newProps.latitude],\n        zoom: newProps.zoom,\n        pitch: newProps.pitch,\n        bearing: newProps.bearing\n      });\n    }\n  }\n\n  _onViewportChange(event) {\n    const map = event.target;\n    const { lng, lat } = map.getCenter();\n    const zoom = map.getZoom();\n    const pitch = map.getPitch();\n    const bearing = map.getBearing();\n\n    const viewport = {\n      latitude: lat,\n      longitude: lng,\n      zoom,\n      pitch,\n      bearing\n    };\n\n    this.props.onViewportChange(viewport);\n  }\n\n  render() {\n    const { className, style } = this.props;\n\n    return createElement('div', {\n      ref: ref => (this.container = ref),\n      style,\n      className\n    });\n  }\n}\n\nMapGL.displayName = 'MapGL';\nMapGL.propTypes = propTypes;\nMapGL.defaultProps = defaultProps;\n\nexport default MapGL;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prop-types\"\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 3\n// module chunks = 0","// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* eslint-disable max-statements */\nexport function diffSources(prevStyle, nextStyle) {\n  const prevSources = prevStyle.get('sources');\n  const nextSources = nextStyle.get('sources');\n  const enter = [];\n  const update = [];\n  const exit = [];\n  const prevIds = prevSources.keySeq().toArray();\n  const nextIds = nextSources.keySeq().toArray();\n  prevIds.forEach((id) => {\n    const nextSource = nextSources.get(id);\n    if (nextSource) {\n      if (!nextSource.equals(prevSources.get(id))) {\n        update.push({ id, source: nextSources.get(id) });\n      }\n    } else {\n      exit.push({ id, source: prevSources.get(id) });\n    }\n  });\n  nextIds.forEach((id) => {\n    const prevSource = prevSources.get(id);\n    if (!prevSource) {\n      enter.push({ id, source: nextSources.get(id) });\n    }\n  });\n  return { enter, update, exit };\n}\n/* eslint-enable max-statements */\n\nexport function diffLayers(prevStyle, nextStyle) {\n  const prevLayers = prevStyle.get('layers');\n  const nextLayers = nextStyle.get('layers');\n  const updates = [];\n  const exiting = [];\n  const prevMap = {};\n  const nextMap = {};\n  nextLayers.forEach((layer, index) => {\n    const id = layer.get('id');\n    const layerImBehind = nextLayers.get(index + 1);\n    nextMap[id] = {\n      layer,\n      id,\n      // The `id` of the layer before this one.\n      before: layerImBehind ? layerImBehind.get('id') : null,\n      enter: true\n    };\n  });\n  prevLayers.forEach((layer, index) => {\n    const id = layer.get('id');\n    const layerImBehind = prevLayers.get(index + 1);\n    prevMap[id] = {\n      layer,\n      id,\n      before: layerImBehind ? layerImBehind.get('id') : null\n    };\n    if (nextMap[id]) {\n      // Not a new layer.\n      nextMap[id].enter = false;\n    } else {\n      // This layer is being removed.\n      exiting.push(prevMap[id]);\n    }\n  });\n  nextLayers.reverse().forEach((layer) => {\n    const id = layer.get('id');\n    if (\n      !prevMap[id] ||\n      !prevMap[id].layer.equals(nextMap[id].layer) ||\n      prevMap[id].before !== nextMap[id].before\n    ) {\n      // This layer is being changed.\n      updates.push(nextMap[id]);\n    }\n  });\n  return { updates, exiting };\n}\n\nexport default function diffStyle(prevStyle, nextStyle) {\n  return {\n    sourcesDiff: diffSources(prevStyle, nextStyle),\n    layersDiff: diffLayers(prevStyle, nextStyle)\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/diff-styles.js","import { Map } from 'immutable';\n\nfunction getInteractiveLayerIds(mapStyle) {\n  let interactiveLayerIds = [];\n\n  if (Map.isMap(mapStyle) && mapStyle.has('layers')) {\n    interactiveLayerIds = mapStyle\n      .get('layers')\n      .filter(l => l.get('interactive'))\n      .map(l => l.get('id'))\n      .toJS();\n  } else if (Array.isArray(mapStyle.layers)) {\n    interactiveLayerIds = mapStyle.layers\n      .filter(l => l.interactive)\n      .map(l => l.id);\n  }\n\n  return interactiveLayerIds;\n}\n\nexport default getInteractiveLayerIds;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/style-utils.js"],"sourceRoot":""}