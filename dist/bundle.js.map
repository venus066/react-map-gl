{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bundle.js","webpack:///webpack/bootstrap 6d4be12706bb4d17c9dc","webpack:///external \"mapbox-gl\"","webpack:///external \"immutable\"","webpack:///external \"react\"","webpack:///./src/index.js","webpack:///./src/components/MapGL.js","webpack:///./src/components/Layer.js","webpack:///./src/diff.js","webpack:///./src/queryRenderedFeatures.js","webpack:///./src/components/Source.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","value","_MapGL","_Layer","_Source","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","_extends","assign","target","arguments","length","source","key","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_mapboxGl","_mapboxGl2","_react","_immutable","MapGL","_PureComponent","_this","getPrototypeOf","state","loaded","accessToken","_onViewportChange","bind","_this2","mapStyle","isImmutable","toJS","map","Map","container","_container","style","interactive","onViewportChange","center","longitude","latitude","zoom","pitch","bearing","minZoom","maxZoom","hash","bearingSnap","pitchWithRotate","attributionControl","logoPosition","failIfMajorPerformanceCaveat","preserveDrawingBuffer","refreshExpiredTiles","maxBounds","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","trackResize","renderWorldCopies","maxTileCacheSize","once","setState","onLoad","on","_map","_updateMapViewport","newProps","_updateMapStyle","remove","prevProps","newMapStyle","prevMapStyle","equals","setStyle","getCenter","lat","lng","getZoom","getPitch","getBearing","flyTo","event","_map$getCenter","viewport","_this3","_props","children","className","createElement","ref","_ref","Children","_ref2","type","PureComponent","defaultProps","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","_diff","_diff2","_queryRenderedFeatures","_queryRenderedFeatures2","Layer","_id","id","layer","_onClick","_onHover","_onEnter","_onLeave","addLayer","newLayer","prevLayer","is","newPaint","prevPaint","forEach","setPaintProperty","newLayout","prevLayout","_ref3","_ref4","setLayoutProperty","newFilter","prevFilter","setFilter","toArray","getStyle","removeLayer","onClick","_props2","radius","position","point","x","y","features","onHover","_props3","onEnter","_props4","onLeave","_props5","_toConsumableArray","arr2","from","empty","diff","newMap","prevMap","keys","Set","concat","reduce","acc","layerId","parameters","layers","bbox","queryRenderedFeatures","Source","apply","addSource","newSource","prevSource","newData","getSource","setData","removeSource"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"mapbox-gl\"), require(\"immutable\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"mapbox-gl\", \"immutable\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@urbica/react-map-gl\"] = factory(require(\"mapbox-gl\"), require(\"immutable\"), require(\"react\"));\n\telse\n\t\troot[\"@urbica/react-map-gl\"] = factory(root[\"mapbox-gl\"], root[\"immutable\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"mapbox-gl\"), require(\"immutable\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"mapbox-gl\", \"immutable\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@urbica/react-map-gl\"] = factory(require(\"mapbox-gl\"), require(\"immutable\"), require(\"react\"));\n\telse\n\t\troot[\"@urbica/react-map-gl\"] = factory(root[\"mapbox-gl\"], root[\"immutable\"], root[\"react\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _MapGL = __webpack_require__(4);\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_MapGL).default;\n  }\n});\n\nvar _Layer = __webpack_require__(5);\n\nObject.defineProperty(exports, 'Layer', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Layer).default;\n  }\n});\n\nvar _Source = __webpack_require__(8);\n\nObject.defineProperty(exports, 'Source', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Source).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mapboxGl = __webpack_require__(0);\n\nvar _mapboxGl2 = _interopRequireDefault(_mapboxGl);\n\nvar _react = __webpack_require__(2);\n\nvar _immutable = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar MapGL = function (_PureComponent) {\n  _inherits(MapGL, _PureComponent);\n\n  function MapGL(props) {\n    _classCallCheck(this, MapGL);\n\n    var _this = _possibleConstructorReturn(this, (MapGL.__proto__ || Object.getPrototypeOf(MapGL)).call(this, props));\n\n    _this.state = {\n      loaded: false\n    };\n\n\n    if (_mapboxGl2.default) {\n      _mapboxGl2.default.accessToken = props.accessToken;\n    }\n\n    _this._onViewportChange = _this._onViewportChange.bind(_this);\n    return _this;\n  }\n\n  _createClass(MapGL, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!_mapboxGl2.default) {\n        return;\n      }\n\n      var mapStyle = (0, _immutable.isImmutable)(this.props.mapStyle) ? this.props.mapStyle.toJS() : this.props.mapStyle;\n\n      var map = new _mapboxGl2.default.Map({\n        container: this._container,\n        style: mapStyle,\n        interactive: !!this.props.onViewportChange,\n        center: [this.props.longitude, this.props.latitude],\n        zoom: this.props.zoom,\n        pitch: this.props.pitch,\n        bearing: this.props.bearing,\n        minZoom: this.props.minZoom,\n        maxZoom: this.props.maxZoom,\n        hash: this.props.hash,\n        bearingSnap: this.props.bearingSnap,\n        pitchWithRotate: this.props.pitchWithRotate,\n        attributionControl: this.props.attributionControl,\n        logoPosition: this.props.logoPosition,\n        failIfMajorPerformanceCaveat: this.props.failIfMajorPerformanceCaveat,\n        preserveDrawingBuffer: this.props.preserveDrawingBuffer,\n        refreshExpiredTiles: this.props.refreshExpiredTiles,\n        maxBounds: this.props.maxBounds,\n        boxZoom: this.props.boxZoom,\n        dragRotate: this.props.dragRotate,\n        dragPan: this.props.dragPan,\n        keyboard: this.props.keyboard,\n        doubleClickZoom: this.props.doubleClickZoom,\n        trackResize: this.props.trackResize,\n        renderWorldCopies: this.props.renderWorldCopies,\n        maxTileCacheSize: this.props.maxTileCacheSize\n      });\n\n      map.once('load', function () {\n        _this2.setState({ loaded: true }, _this2.props.onLoad);\n      });\n\n      if (this.props.onViewportChange) {\n        map.on('dragend', this._onViewportChange);\n        map.on('zoomend', this._onViewportChange);\n        map.on('rotateend', this._onViewportChange);\n        map.on('pitchend', this._onViewportChange);\n        map.on('boxzoomend', this._onViewportChange);\n      }\n\n      this._map = map;\n      this._updateMapViewport(this.props);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      this._updateMapViewport(newProps);\n      this._updateMapStyle(this.props, newProps);\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this._map) {\n        this._map.remove();\n      }\n    }\n\n    // External apps can access map this way\n\n  }, {\n    key: 'getMap',\n    value: function getMap() {\n      return this._map;\n    }\n\n    /**\n     * Update Map style from newProps\n     *\n     * @private\n     * @param {Props} prevProps\n     * @param {Props} newProps\n     */\n\n  }, {\n    key: '_updateMapStyle',\n    value: function _updateMapStyle(prevProps, newProps) {\n      var newMapStyle = newProps.mapStyle;\n      var prevMapStyle = prevProps.mapStyle;\n\n      if ((0, _immutable.isImmutable)(newMapStyle) && !newMapStyle.equals(prevMapStyle)) {\n        this._map.setStyle(newMapStyle.toJS());\n      } else if (newMapStyle !== prevMapStyle) {\n        this._map.setStyle(newMapStyle);\n      }\n    }\n\n    /**\n     * Update Map viewport from newProps\n     *\n     * @private\n     * @param {Props} newProps\n     */\n\n  }, {\n    key: '_updateMapViewport',\n    value: function _updateMapViewport(newProps) {\n      var map = this._map;\n      var center = map.getCenter();\n\n      var viewportChanged = newProps.latitude !== center.lat || newProps.longitude !== center.lng || newProps.zoom !== map.getZoom() || newProps.pitch !== map.getPitch() || newProps.bearing !== map.getBearing();\n\n      if (viewportChanged) {\n        map.flyTo({\n          center: [newProps.longitude, newProps.latitude],\n          zoom: newProps.zoom,\n          pitch: newProps.pitch,\n          bearing: newProps.bearing\n        });\n      }\n    }\n\n    /**\n     * fires `onViewportChange` callback when the user interacted with the map.\n     *\n     * @private\n     * @param {(mapboxgl.MapMouseEvent | mapboxgl.MapTouchEvent)} event\n     */\n\n  }, {\n    key: '_onViewportChange',\n    value: function _onViewportChange(event) {\n      var map = event.target;\n\n      var _map$getCenter = map.getCenter(),\n          lng = _map$getCenter.lng,\n          lat = _map$getCenter.lat;\n\n      var zoom = map.getZoom();\n      var pitch = map.getPitch();\n      var bearing = map.getBearing();\n\n      var viewport = {\n        latitude: lat,\n        longitude: lng,\n        zoom: zoom,\n        pitch: pitch,\n        bearing: bearing\n      };\n\n      // $FlowFixMe\n      this.props.onViewportChange(viewport);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      var loaded = this.state.loaded;\n      var _props = this.props,\n          children = _props.children,\n          className = _props.className,\n          style = _props.style;\n\n\n      return (0, _react.createElement)('div', {\n        ref: function ref(_ref) {\n          return _this3._container = _ref;\n        },\n        style: style,\n        className: className\n      }, loaded && _react.Children.map(children, function (_ref2) {\n        var type = _ref2.type,\n            props = _ref2.props;\n        return (0, _react.createElement)(type, _extends({ map: _this3._map }, props));\n      }));\n    }\n  }]);\n\n  return MapGL;\n}(_react.PureComponent);\n\nMapGL.defaultProps = {\n  className: null,\n  style: null,\n  mapStyle: 'mapbox://styles/mapbox/light-v8',\n  accessToken: null,\n  bearing: 0,\n  pitch: 0,\n  minZoom: 0,\n  maxZoom: 22,\n  hash: false,\n  bearingSnap: 7,\n  pitchWithRotate: true,\n  attributionControl: true,\n  logoPosition: 'bottom-left',\n  failIfMajorPerformanceCaveat: false,\n  preserveDrawingBuffer: false,\n  refreshExpiredTiles: true,\n  boxZoom: true,\n  dragRotate: true,\n  dragPan: true,\n  keyboard: true,\n  doubleClickZoom: true,\n  trackResize: true,\n  renderWorldCopies: true,\n  maxTileCacheSize: null,\n  onViewportChange: null,\n  onLoad: null\n};\nexports.default = MapGL;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mapboxGl = __webpack_require__(0);\n\nvar _mapboxGl2 = _interopRequireDefault(_mapboxGl);\n\nvar _react = __webpack_require__(2);\n\nvar _immutable = __webpack_require__(1);\n\nvar _diff = __webpack_require__(6);\n\nvar _diff2 = _interopRequireDefault(_diff);\n\nvar _queryRenderedFeatures = __webpack_require__(7);\n\nvar _queryRenderedFeatures2 = _interopRequireDefault(_queryRenderedFeatures);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Layer = function (_PureComponent) {\n  _inherits(Layer, _PureComponent);\n\n  function Layer(props) {\n    _classCallCheck(this, Layer);\n\n    var _this = _possibleConstructorReturn(this, (Layer.__proto__ || Object.getPrototypeOf(Layer)).call(this, props));\n\n    _this._id = props.id || props.layer.get('id', '');\n\n    _this._onClick = _this._onClick.bind(_this);\n    _this._onHover = _this._onHover.bind(_this);\n    _this._onEnter = _this._onEnter.bind(_this);\n    _this._onLeave = _this._onLeave.bind(_this);\n    return _this;\n  }\n\n  _createClass(Layer, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          map = _props.map,\n          layer = _props.layer;\n\n      map.addLayer(layer.toJS());\n\n      map.on('click', this._id, this._onClick);\n      map.on('mousemove', this._id, this._onHover);\n      map.on('mouseenter', this._id, this._onEnter);\n      map.on('mouseleave', this._id, this._onLeave);\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      var _this2 = this;\n\n      var newLayer = newProps.layer;\n      var prevLayer = this.props.layer;\n\n      if (!(0, _immutable.is)(newLayer, prevLayer)) {\n        var _map = newProps.map;\n\n\n        var newPaint = newLayer.get('paint');\n        var prevPaint = prevLayer.get('paint');\n        if (!(0, _immutable.is)(newPaint, prevPaint)) {\n          (0, _diff2.default)(newPaint, prevPaint).forEach(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                key = _ref2[0],\n                value = _ref2[1];\n\n            return _map.setPaintProperty(_this2._id, key, value);\n          });\n        }\n\n        var newLayout = newLayer.get('layout');\n        var prevLayout = prevLayer.get('layout');\n        if (!(0, _immutable.is)(newLayout, prevLayout)) {\n          (0, _diff2.default)(newLayout, prevLayout).forEach(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                key = _ref4[0],\n                value = _ref4[1];\n\n            return _map.setLayoutProperty(_this2._id, key, value);\n          });\n        }\n\n        var newFilter = newLayer.get('filter');\n        var prevFilter = prevLayer.get('filter');\n        if (!newFilter) {\n          _map.setFilter(this._id, undefined);\n        } else if (!(0, _immutable.is)(newFilter, prevFilter)) {\n          _map.setFilter(this._id, newFilter.toArray());\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var map = this.props.map;\n\n      if (!map || !map.getStyle()) {\n        return;\n      }\n\n      map.removeLayer(this._id);\n    }\n  }, {\n    key: '_onClick',\n    value: function _onClick(event) {\n      if (this.props.onClick) {\n        var _props2 = this.props,\n            _map2 = _props2.map,\n            _radius = _props2.radius;\n\n        var position = [event.point.x, event.point.y];\n\n        /* eslint-disable no-param-reassign */\n        event.features = (0, _queryRenderedFeatures2.default)(_map2, this._id, position, _radius);\n        /* eslint-enable no-param-reassign */\n\n        this.props.onClick(event);\n      }\n    }\n  }, {\n    key: '_onHover',\n    value: function _onHover(event) {\n      if (this.props.onHover) {\n        var _props3 = this.props,\n            _map3 = _props3.map,\n            _radius2 = _props3.radius;\n\n        var position = [event.point.x, event.point.y];\n\n        /* eslint-disable no-param-reassign */\n        event.features = (0, _queryRenderedFeatures2.default)(_map3, this._id, position, _radius2);\n        /* eslint-enable no-param-reassign */\n\n        this.props.onHover(event);\n      }\n    }\n  }, {\n    key: '_onEnter',\n    value: function _onEnter(event) {\n      if (this.props.onEnter) {\n        var _props4 = this.props,\n            _map4 = _props4.map,\n            _radius3 = _props4.radius;\n\n        var position = [event.point.x, event.point.y];\n\n        /* eslint-disable no-param-reassign */\n        event.features = (0, _queryRenderedFeatures2.default)(_map4, this._id, position, _radius3);\n        /* eslint-enable no-param-reassign */\n\n        this.props.onEnter(event);\n      }\n    }\n  }, {\n    key: '_onLeave',\n    value: function _onLeave(event) {\n      if (this.props.onLeave) {\n        var _props5 = this.props,\n            _map5 = _props5.map,\n            _radius4 = _props5.radius;\n\n        var position = [event.point.x, event.point.y];\n\n        /* eslint-disable no-param-reassign */\n        event.features = (0, _queryRenderedFeatures2.default)(_map5, this._id, position, _radius4);\n        /* eslint-enable no-param-reassign */\n\n        this.props.onLeave(event);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Layer;\n}(_react.PureComponent);\n\nLayer.defaultProps = {\n  onClick: null,\n  radius: 0\n};\nexports.default = Layer;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _immutable = __webpack_require__(1);\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar empty = new _immutable.Map();\nvar diff = function diff() {\n  var newMap = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : empty;\n  var prevMap = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : empty;\n\n  var keys = new Set([].concat(_toConsumableArray(newMap.keys()), _toConsumableArray(prevMap.keys())));\n  return Array.from(keys).reduce(function (acc, key) {\n    var value = newMap.get(key);\n    if (prevMap.get(key) !== value) {\n      acc.push([key, value]);\n    }\n    return acc;\n  }, []);\n};\n\nexports.default = diff;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mapboxGl = __webpack_require__(0);\n\nvar _mapboxGl2 = _interopRequireDefault(_mapboxGl);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (map, layerId, position, radius) {\n  var parameters = { layers: [layerId] };\n\n  if (radius) {\n    var bbox = [[position[0] - radius, position[1] - radius], [position[0] + radius, position[1] + radius]];\n\n    return map.queryRenderedFeatures(bbox, parameters);\n  }\n\n  return map.queryRenderedFeatures(position, parameters);\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mapboxGl = __webpack_require__(0);\n\nvar _mapboxGl2 = _interopRequireDefault(_mapboxGl);\n\nvar _react = __webpack_require__(2);\n\nvar _immutable = __webpack_require__(1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Source = function (_PureComponent) {\n  _inherits(Source, _PureComponent);\n\n  function Source() {\n    _classCallCheck(this, Source);\n\n    return _possibleConstructorReturn(this, (Source.__proto__ || Object.getPrototypeOf(Source)).apply(this, arguments));\n  }\n\n  _createClass(Source, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _props = this.props,\n          map = _props.map,\n          id = _props.id,\n          source = _props.source;\n\n      map.addSource(id, source.toJS());\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(newProps) {\n      var newSource = newProps.source;\n      var prevSource = this.props.source;\n\n      if (!newSource.equals(prevSource)) {\n        var _props2 = this.props,\n            _map = _props2.map,\n            _id = _props2.id;\n\n\n        if (newSource.get('type') === 'geojson') {\n          var newData = newSource.get('data');\n          if ((0, _immutable.isImmutable)(newData) && !newData.equals(prevSource.get('data'))) {\n            _map.getSource(_id).setData(newData.toJS());\n          }\n        } else {\n          _map.removeSource(_id);\n          _map.addSource(_id, newSource.toJS());\n        }\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      var _props3 = this.props,\n          map = _props3.map,\n          id = _props3.id;\n\n      if (!map || !map.getStyle()) {\n        return;\n      }\n\n      map.removeSource(id);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Source;\n}(_react.PureComponent);\n\nexports.default = Source;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6d4be12706bb4d17c9dc","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mapbox-gl\"\n// module id = 0\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"immutable\"\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 2\n// module chunks = 0","export { default } from './components/MapGL';\nexport { default as Layer } from './components/Layer';\nexport { default as Source } from './components/Source';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// @flow\n\nimport mapboxgl from 'mapbox-gl';\nimport { Children, PureComponent, createElement } from 'react';\nimport { isImmutable } from 'immutable';\nimport type { Node } from 'react';\n\nimport type { MapStyle, Viewport } from '../types';\n\ntype Props = {\n  /** container className */\n  className?: String,\n\n  /** container style */\n  style?: Object,\n\n  /** The Mapbox style. A string url or a MapboxGL style Immutable.Map object. */\n  mapStyle: string | MapStyle,\n\n  /** Sources and Layers */\n  children?: Node,\n\n  /** Mapbox API access token for mapbox-gl-js. Required when using Mapbox vector tiles/styles. */\n  accessToken?: string,\n\n  /** The longitude of the center of the map. */\n  longitude: number,\n\n  /** The latitude of the center of the map. */\n  latitude: number,\n\n  /** The tile zoom level of the map. */\n  zoom: number,\n\n  /** Specify the bearing of the viewport */\n  bearing?: number,\n\n  /** Specify the pitch of the viewport */\n  pitch?: number,\n\n  /** The minimum zoom level of the map (0-22). */\n  minZoom?: number,\n\n  /** The maximum zoom level of the map (0-22). */\n  maxZoom?: number,\n\n  /**\n   * If `true`, the map's position (zoom, center latitude,\n   * center longitude, bearing, and pitch) will be synced\n   * with the hash fragment of the page's URL. For example,\n   * http://path/to/my/page.html#2.59/39.26/53.07/-24.1/60.\n   */\n  hash?: boolean,\n\n  /**\n   * The threshold, measured in degrees, that determines when\n   * the map's bearing (rotation) will snap to north. For\n   * example, with a  bearingSnap of 7, if the user rotates the\n   * map within 7 degrees of north, the map will automatically\n   * snap to exact north.\n   */\n  bearingSnap?: number,\n\n  /**\n   * If `false`, the map's pitch (tilt) control with \"drag to\n   * rotate\" interaction will be disabled.\n   */\n  pitchWithRotate?: boolean,\n\n  /** If `true`, an AttributionControl will be added to the map. */\n  attributionControl?: boolean,\n\n  /* A string representing the position of the Mapbox wordmark on the map. */\n  logoPosition?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right',\n\n  /**\n   * If `true`, map creation will fail if the performance of Mapbox\n   * GL JS would be dramatically worse than expected (i.e. a software\n   * renderer would be used).\n   */\n  failIfMajorPerformanceCaveat?: boolean,\n\n  /** Mapbox WebGL context creation option. Useful when you want to export the canvas as a PNG. */\n  preserveDrawingBuffer?: boolean,\n\n  /**\n   * If `false`, the map won't attempt to re-request tiles once they\n   * expire per their HTTP `cacheControl`/`expires` headers.\n   */\n  refreshExpiredTiles?: boolean,\n\n  /** If set, the map will be constrained to the given bounds. */\n  maxBounds?: mapboxgl.LngLatBoundsLike,\n\n  /** If `true`, the \"box zoom\" interaction is enabled */\n  boxZoom?: boolean,\n\n  /** If `true`, the \"drag to rotate\" interaction is enabled */\n  dragRotate?: boolean,\n\n  /** If `true`, the \"drag to pan\" interaction is enabled */\n  dragPan?: boolean,\n\n  /** If `true`, keyboard shortcuts are enabled */\n  keyboard?: boolean,\n\n  /** If `true`, the \"double click to zoom\" interaction is enabled */\n  doubleClickZoom?: boolean,\n\n  /** If `true`, the map will automatically resize when the browser window resizes. */\n  trackResize?: boolean,\n\n  /**\n   * The maxiumum number of tiles stored in the tile cache for a given\n   * source. If omitted, the cache will be dynamically sized based on\n   * the current viewport.\n   */\n  maxTileCacheSize?: number,\n\n  /** If  true, multiple copies of the world will be rendered, when zoomed out */\n  renderWorldCopies?: boolean,\n\n  /**\n   * `onViewportChange` callback is fired when the user interacted with the\n   * map. The object passed to the callback contains viewport properties\n   * such as `longitude`, `latitude`, `zoom` etc.\n   */\n  onViewportChange?: (viewport: Viewport) => void,\n\n  /** The onLoad callback for the map */\n  onLoad?: Function\n};\n\ntype State = {\n  loaded: boolean\n};\n\nclass MapGL extends PureComponent<Props, State> {\n  _map: mapboxgl.Map;\n  _container: ?HTMLElement;\n  _onViewportChange: (event: mapboxgl.MapMouseEvent | mapboxgl.MapTouchEvent) => void;\n\n  static defaultProps = {\n    className: null,\n    style: null,\n    mapStyle: 'mapbox://styles/mapbox/light-v8',\n    accessToken: null,\n    bearing: 0,\n    pitch: 0,\n    minZoom: 0,\n    maxZoom: 22,\n    hash: false,\n    bearingSnap: 7,\n    pitchWithRotate: true,\n    attributionControl: true,\n    logoPosition: 'bottom-left',\n    failIfMajorPerformanceCaveat: false,\n    preserveDrawingBuffer: false,\n    refreshExpiredTiles: true,\n    boxZoom: true,\n    dragRotate: true,\n    dragPan: true,\n    keyboard: true,\n    doubleClickZoom: true,\n    trackResize: true,\n    renderWorldCopies: true,\n    maxTileCacheSize: null,\n    onViewportChange: null,\n    onLoad: null\n  };\n\n  constructor(props: Props) {\n    super(props);\n\n    if (mapboxgl) {\n      mapboxgl.accessToken = props.accessToken;\n    }\n\n    this._onViewportChange = this._onViewportChange.bind(this);\n  }\n\n  state = {\n    loaded: false\n  };\n\n  componentDidMount() {\n    if (!mapboxgl) {\n      return;\n    }\n\n    const mapStyle = isImmutable(this.props.mapStyle)\n      ? (this.props.mapStyle: MapStyle).toJS()\n      : this.props.mapStyle;\n\n    const map = new mapboxgl.Map({\n      container: this._container,\n      style: mapStyle,\n      interactive: !!this.props.onViewportChange,\n      center: [this.props.longitude, this.props.latitude],\n      zoom: this.props.zoom,\n      pitch: this.props.pitch,\n      bearing: this.props.bearing,\n      minZoom: this.props.minZoom,\n      maxZoom: this.props.maxZoom,\n      hash: this.props.hash,\n      bearingSnap: this.props.bearingSnap,\n      pitchWithRotate: this.props.pitchWithRotate,\n      attributionControl: this.props.attributionControl,\n      logoPosition: this.props.logoPosition,\n      failIfMajorPerformanceCaveat: this.props.failIfMajorPerformanceCaveat,\n      preserveDrawingBuffer: this.props.preserveDrawingBuffer,\n      refreshExpiredTiles: this.props.refreshExpiredTiles,\n      maxBounds: this.props.maxBounds,\n      boxZoom: this.props.boxZoom,\n      dragRotate: this.props.dragRotate,\n      dragPan: this.props.dragPan,\n      keyboard: this.props.keyboard,\n      doubleClickZoom: this.props.doubleClickZoom,\n      trackResize: this.props.trackResize,\n      renderWorldCopies: this.props.renderWorldCopies,\n      maxTileCacheSize: this.props.maxTileCacheSize\n    });\n\n    map.once('load', () => {\n      this.setState({ loaded: true }, this.props.onLoad);\n    });\n\n    if (this.props.onViewportChange) {\n      map.on('dragend', this._onViewportChange);\n      map.on('zoomend', this._onViewportChange);\n      map.on('rotateend', this._onViewportChange);\n      map.on('pitchend', this._onViewportChange);\n      map.on('boxzoomend', this._onViewportChange);\n    }\n\n    this._map = map;\n    this._updateMapViewport(this.props);\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    this._updateMapViewport(newProps);\n    this._updateMapStyle(this.props, newProps);\n  }\n\n  componentWillUnmount() {\n    if (this._map) {\n      this._map.remove();\n    }\n  }\n\n  // External apps can access map this way\n  getMap() {\n    return this._map;\n  }\n\n  /**\n   * Update Map style from newProps\n   *\n   * @private\n   * @param {Props} prevProps\n   * @param {Props} newProps\n   */\n  _updateMapStyle(prevProps: Props, newProps: Props): void {\n    const newMapStyle = newProps.mapStyle;\n    const prevMapStyle = prevProps.mapStyle;\n\n    if (isImmutable(newMapStyle) && !(newMapStyle: MapStyle).equals(prevMapStyle)) {\n      this._map.setStyle((newMapStyle: MapStyle).toJS());\n    } else if (newMapStyle !== prevMapStyle) {\n      this._map.setStyle(newMapStyle);\n    }\n  }\n\n  /**\n   * Update Map viewport from newProps\n   *\n   * @private\n   * @param {Props} newProps\n   */\n  _updateMapViewport(newProps: Props): void {\n    const map: mapboxgl.Map = this._map;\n    const center: mapboxgl.LngLat = map.getCenter();\n\n    const viewportChanged =\n      newProps.latitude !== center.lat ||\n      newProps.longitude !== center.lng ||\n      newProps.zoom !== map.getZoom() ||\n      newProps.pitch !== map.getPitch() ||\n      newProps.bearing !== map.getBearing();\n\n    if (viewportChanged) {\n      map.flyTo({\n        center: [newProps.longitude, newProps.latitude],\n        zoom: newProps.zoom,\n        pitch: newProps.pitch,\n        bearing: newProps.bearing\n      });\n    }\n  }\n\n  /**\n   * fires `onViewportChange` callback when the user interacted with the map.\n   *\n   * @private\n   * @param {(mapboxgl.MapMouseEvent | mapboxgl.MapTouchEvent)} event\n   */\n  _onViewportChange(event: mapboxgl.MapMouseEvent | mapboxgl.MapTouchEvent): void {\n    const map: mapboxgl.Map = event.target;\n    const { lng, lat } = map.getCenter();\n    const zoom = map.getZoom();\n    const pitch = map.getPitch();\n    const bearing = map.getBearing();\n\n    const viewport: Viewport = {\n      latitude: lat,\n      longitude: lng,\n      zoom,\n      pitch,\n      bearing\n    };\n\n    // $FlowFixMe\n    this.props.onViewportChange(viewport);\n  }\n\n  render() {\n    const { loaded } = this.state;\n    const { children, className, style } = this.props;\n\n    return createElement(\n      'div',\n      {\n        ref: ref => (this._container = ref),\n        style,\n        className\n      },\n      loaded &&\n        Children.map(children, ({ type, props }) =>\n          createElement(type, { map: this._map, ...props }))\n    );\n  }\n}\n\nexport default MapGL;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/MapGL.js","// @flow\n\nimport mapboxgl from 'mapbox-gl';\nimport { PureComponent } from 'react';\nimport { is } from 'immutable';\nimport type { MapLayer } from '../types';\nimport diff from '../diff';\nimport queryRenderedFeatures from '../queryRenderedFeatures';\n\ntype Props = {\n  /** Mapbox GL JS map instance */\n  map: mapboxgl.Map,\n\n  /** Mapbox GL Layer id */\n  id?: string,\n\n  /** Mapbox GL Layer as Immutable object */\n  layer: MapLayer,\n\n  /**\n   * Called when the layer is clicked.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer, using Mapbox's\n   * queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onClick: (event: mapboxgl.MapEvent) => any,\n\n  /**\n   * Called when the layer is hovered over.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer, using Mapbox's\n   * queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onHover: (event: mapboxgl.MapEvent) => any,\n\n  /**\n   * Called when the layer feature is entered.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer, using Mapbox's\n   * queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onEnter: (event: mapboxgl.MapEvent) => any,\n\n  /**\n   * Called when the layer feature is leaved.\n   * @callback\n   * @param {Object} event - The mouse event.\n   * @param {[Number, Number]} event.lngLat - The coordinates of the pointer\n   * @param {Array} event.features - The features under the pointer, using Mapbox's\n   * queryRenderedFeatures API:\n   * https://www.mapbox.com/mapbox-gl-js/api/#Map#queryRenderedFeatures\n   */\n  onLeave: (event: mapboxgl.MapEvent) => any,\n\n  /** Radius to detect features around a clicked/hovered point (defaults to 0) */\n  radius: number\n};\n\nclass Layer extends PureComponent<Props> {\n  _id: string;\n  _onClick: (event: mapboxgl.MapEvent) => void;\n  _onHover: (event: mapboxgl.MapEvent) => void;\n  _onEnter: (event: mapboxgl.MapEvent) => void;\n  _onLeave: (event: mapboxgl.MapEvent) => void;\n\n  static defaultProps = {\n    onClick: null,\n    radius: 0\n  };\n\n  constructor(props: Props) {\n    super(props);\n    this._id = props.id || props.layer.get('id', '');\n\n    this._onClick = this._onClick.bind(this);\n    this._onHover = this._onHover.bind(this);\n    this._onEnter = this._onEnter.bind(this);\n    this._onLeave = this._onLeave.bind(this);\n  }\n\n  componentDidMount() {\n    const { map, layer } = this.props;\n    map.addLayer(layer.toJS());\n\n    map.on('click', this._id, this._onClick);\n    map.on('mousemove', this._id, this._onHover);\n    map.on('mouseenter', this._id, this._onEnter);\n    map.on('mouseleave', this._id, this._onLeave);\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    const newLayer = newProps.layer;\n    const prevLayer = this.props.layer;\n\n    if (!is(newLayer, prevLayer)) {\n      const { map } = newProps;\n\n      const newPaint = newLayer.get('paint');\n      const prevPaint = prevLayer.get('paint');\n      if (!is(newPaint, prevPaint)) {\n        diff(newPaint, prevPaint).forEach(([key, value]) =>\n          map.setPaintProperty(this._id, key, value));\n      }\n\n      const newLayout = newLayer.get('layout');\n      const prevLayout = prevLayer.get('layout');\n      if (!is(newLayout, prevLayout)) {\n        diff(newLayout, prevLayout).forEach(([key, value]) =>\n          map.setLayoutProperty(this._id, key, value));\n      }\n\n      const newFilter = newLayer.get('filter');\n      const prevFilter = prevLayer.get('filter');\n      if (!newFilter) {\n        map.setFilter(this._id, undefined);\n      } else if (!is(newFilter, prevFilter)) {\n        map.setFilter(this._id, newFilter.toArray());\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { map } = this.props;\n    if (!map || !map.getStyle()) {\n      return;\n    }\n\n    map.removeLayer(this._id);\n  }\n\n  _onClick(event: mapboxgl.MapEvent): void {\n    if (this.props.onClick) {\n      const { map, radius } = this.props;\n      const position = [event.point.x, event.point.y];\n\n      /* eslint-disable no-param-reassign */\n      event.features = queryRenderedFeatures(map, this._id, position, radius);\n      /* eslint-enable no-param-reassign */\n\n      this.props.onClick(event);\n    }\n  }\n\n  _onHover(event: mapboxgl.MapEvent): void {\n    if (this.props.onHover) {\n      const { map, radius } = this.props;\n      const position = [event.point.x, event.point.y];\n\n      /* eslint-disable no-param-reassign */\n      event.features = queryRenderedFeatures(map, this._id, position, radius);\n      /* eslint-enable no-param-reassign */\n\n      this.props.onHover(event);\n    }\n  }\n\n  _onEnter(event: mapboxgl.MapEvent): void {\n    if (this.props.onEnter) {\n      const { map, radius } = this.props;\n      const position = [event.point.x, event.point.y];\n\n      /* eslint-disable no-param-reassign */\n      event.features = queryRenderedFeatures(map, this._id, position, radius);\n      /* eslint-enable no-param-reassign */\n\n      this.props.onEnter(event);\n    }\n  }\n\n  _onLeave(event: mapboxgl.MapEvent): void {\n    if (this.props.onLeave) {\n      const { map, radius } = this.props;\n      const position = [event.point.x, event.point.y];\n\n      /* eslint-disable no-param-reassign */\n      event.features = queryRenderedFeatures(map, this._id, position, radius);\n      /* eslint-enable no-param-reassign */\n\n      this.props.onLeave(event);\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default Layer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Layer.js","// @flow\nimport { Map } from 'immutable';\n\nconst empty = new Map();\nconst diff = (newMap: Map<*, *> = empty, prevMap: Map<*, *> = empty) => {\n  const keys = new Set([...newMap.keys(), ...prevMap.keys()]);\n  return Array.from(keys).reduce((acc, key: string) => {\n    const value = newMap.get(key);\n    if (prevMap.get(key) !== value) {\n      acc.push([key, value]);\n    }\n    return acc;\n  }, []);\n};\n\nexport default diff;\n\n\n\n// WEBPACK FOOTER //\n// ./src/diff.js","// @flow\n\nimport mapboxgl from 'mapbox-gl';\n\nexport default (map: mapboxgl.Map, layerId: string, position: [number, number], radius: number) => {\n  const parameters = { layers: [layerId] };\n\n  if (radius) {\n    const bbox = [\n      [position[0] - radius, position[1] - radius],\n      [position[0] + radius, position[1] + radius]\n    ];\n\n    return map.queryRenderedFeatures(bbox, parameters);\n  }\n\n  return map.queryRenderedFeatures(position, parameters);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/queryRenderedFeatures.js","// @flow\n\nimport mapboxgl from 'mapbox-gl';\nimport { PureComponent } from 'react';\nimport { isImmutable } from 'immutable';\nimport type { MapSource } from '../types';\n\ntype Props = {\n  /** Mapbox GL JS map instance */\n  map: mapboxgl.Map,\n\n  /** Mapbox GL Source id */\n  id: string,\n\n  /** Mapbox GL Source as Immutable object */\n  source: MapSource\n};\n\nclass Source extends PureComponent<Props> {\n  componentDidMount() {\n    const { map, id, source } = this.props;\n    map.addSource(id, source.toJS());\n  }\n\n  componentWillReceiveProps(newProps: Props) {\n    const newSource = newProps.source;\n    const prevSource = this.props.source;\n\n    if (!newSource.equals(prevSource)) {\n      const { map, id } = this.props;\n\n      if (newSource.get('type') === 'geojson') {\n        const newData = newSource.get('data');\n        if (isImmutable(newData) && !newData.equals(prevSource.get('data'))) {\n          map.getSource(id).setData(newData.toJS());\n        }\n      } else {\n        map.removeSource(id);\n        map.addSource(id, newSource.toJS());\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    const { map, id } = this.props;\n    if (!map || !map.getStyle()) {\n      return;\n    }\n\n    map.removeSource(id);\n  }\n\n  render() {\n    return null;\n  }\n}\n\nexport default Source;\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Source.js"],"sourceRoot":""}